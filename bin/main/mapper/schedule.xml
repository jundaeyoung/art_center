<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.bclass.arts_center.repository.interfaces.ScheduleRepository">

	<!-- 김미정 캘린더 카테고리 별 데이터 불러오기 -->
	<select id="selectByCategory"
		resultType="com.bclass.arts_center.dto.RequestShowDto$selectByCategory">
		select s.id as id,s.title as title, h.name as holeName, r.start_date
			as startDate, r.end_date as endDate, img_route as imgRoute
			from rent_place_reservation_tb as r
			join hole_tb
			as h
			on r.hole_id=h.id
			join show_Tb as s
			on s.id = r.show_id
			where s.show_type_id = #{showTypeId};
	</select>

	<!-- 김미정 전체 데이터 불러오기 -->
	<select id="selectByShow"
		resultType="com.bclass.arts_center.dto.RequestShowDto$selectByShow">
		select s.id as id,s.title as title, h.name as holeName, r.start_date
			as startDate, r.end_date as endDate, img_route as imgRoute
			from rent_place_reservation_tb as r
			join hole_tb
			as h
			on r.hole_id=h.id
			join show_Tb as s
			on s.id = r.show_id;
	</select>

	<!-- 김미정 -->
	<select id="selectByShowDetail" resultType="com.bclass.arts_center.dto.RequestShowDto$selectByShowDetail">
		select s.id as id,s.title as title, h.name as holeName,
		s.start_date as startDate,s.img_route as imgRoute, s.end_date as endDate
		from show_tb as s
		inner join hole_tb as h
		on s.hole_id = h.id
		where s.id = #{id};
	</select>
</mapper>