<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.bclass.arts_center.repository.interfaces.AnnouncementRepository">

<insert id="insertAnnouncement">
INSERT INTO announcement_tb(title, content ,user_id)
VALUES(#{title}, #{content}, #{userId});
</insert>

<!-- 전체 찾는 부분 -->
<select id="selectAnnouncement" resultType="com.bclass.arts_center.repository.model.Announcement">
SELECT id, title, content, user_id, FORMATDATETIME(created_date, 'yyyy-MM-dd') AS created_date FROM announcement ORDER BY id DESC
</select>

<select id="selectAnnouncementById" resultType="com.bclass.arts_center.repository.model.Announcement">
SELECT id, title, content, user_id, FORMATDATETIME(created_date, 'yyyy-MM-dd') AS created_date FROM announcement WHERE id = #{id}
</select>

<select id="selectAnnouncementBySearchText" resultType="com.bclass.arts_center.repository.model.Announcement">
select * from announcement_tb
where title
like #{searchText} or content like #{searchText};
</select>

<update id="updateByIdAndUserId">
UPDATE announcement_tb SET title = #{title}, content = #{content} WHERE id = #{id}
</update>

<delete id="deleteAnnouncementByUserId">
DELETE FROM announcement_tb WHERE id = #{id}
</delete>

	
</mapper>