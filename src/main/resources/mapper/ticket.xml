<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.bclass.arts_center.repository.interfaces.TicketRepository">

	<!-- 손주이 : 공연 예매 시 필요한 정보 -->
	<select id="selectShowInfoForTicketingByShowId"
		resultType="com.bclass.arts_center.dto.TicketingDto">
		SELECT *
		FROM show_tb AS s
		JOIN show_datetime_tb AS sd
		ON s.id = sd.show_id
		WHERE sd.show_id = #{showId}
	</select>

	<!-- 작성자 손주이 : show별 날짜 검색 -->
	<select id="selectShowDateByShowId"
		resultType="com.bclass.arts_center.dto.TicketingDto">
		SELECT s.id, sd.show_date
		FROM show_tb AS s
		JOIN show_datetime_tb AS sd
		ON s.id = sd.show_id
		WHERE sd.show_id = #{showId}
		GROUP BY show_date
	</select>

	<!-- 작성자 손주이 : show별 공연 시간 검색 -->
	<select id="selectShowTimeByShowId"
		resultType="com.bclass.arts_center.dto.TicketingDto">
		SELECT sd.id, sd.show_time
		FROM show_tb AS s
		JOIN show_datetime_tb AS sd
		ON s.id = sd.show_id
		WHERE sd.show_id = #{showId} AND sd.show_date = #{showDate}
		GROUP BY show_time
		ORDER BY show_time asc
	</select>
	
<!-- 	<select id="">
		SELECT *
		FROM seat_tb AS st
		JOIN show_tb AS sw
		ON 
	
	
	</select> -->


	<!-- <insert id="insert"> INSERT INTO ticketing_tb (ticketing_date, user_id, 
		show_id, age_group_id) VALUES (now(), #{userId}, #{showId}, #{ageGroupId}) 
		</insert> <delete id="delete"> DELETE FROM ticketing_tb WHERE id = #{id} 
		</delete> -->

</mapper>